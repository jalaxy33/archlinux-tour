
## 可选：更换fish终端

[fish](https://fishshell.com/) 提供了很多开箱即用的方便功能。

- 安装 fish：
    ```bash
    sudo pacman -S fish
    ```
- 安装后运行一次，生成配置文件
    ```bash
    fish
    ```

- 如果要配置 fish

    打开配置文件： 
    ```bash
    vim ~/.config/fish/config.fish
    ```
    如果需要去掉默认的启动文字
    ```bash
    set fish_greeting ""
    ```
    配置后重启 fish
    ```bash
    fish
    ```

- 设置为系统默认shell（不推荐）
    
    需要注意的是 fish 不兼容 posix 语法，命令语法与 sh/bash/zsh 不同，不建议直接用 `chsh` 的方式设置为系统的默认 shell，但可以通过对终端模拟器进行配置达到类似的效果。
    
    如果需要设置：
    ```bash
    chsh -s "$(command -v fish)"
    ```
    可以用同样的方式设置其他的默认 shell 


## 终端美化

### starship

[starship](https://starship.rs/) 是由 rust 开发的 shell 提示符美化工具，性能好、配置简单且支持各种 shell。可以替代 oh-my-bash、oh-my-zsh 等美化工具（这些工具都有性能问题）。

1. 安装 starship：
    ```bash
    sudo pacman -S --needed starship
    ```

2. 安装一款 [nerd-fonts](https://www.nerdfonts.com/) 终端字体
    - 不知道选啥就选 [`JetBrains Mono`](https://www.jetbrains.com/lp/mono/)：
        ```bash
        sudo pacman -S --needed ttf-jetbrains-mono-nerd
        ```
    - 另一个推荐的终端字体是 [`maple-mono`](https://github.com/subframe7536/maple-font/blob/variable/README_CN.md)
        ```sh
        sudo pacman -S --needed ttf-maplemono-nf-cn-unhinted
        ```

3. 编辑配置文件激活 starship
    - fish
      ```bash
      vim ~/.config/fish/config.fish
      ```
      ```bash
      starship init fish | source
      ```
    - zsh
      ```bash
      vim ~/.zshrc
      ```
      ```bash
      eval "$(starship init zsh)"
      ```
    - bash
      ```bash
      vim ~/.bashrc
      ```
      ```bash
      eval "$(starship init bash)"
      ```

4. 可选：使用预设主题
    
    到这个网站下载一个自己喜欢的预设主题，重命名为 `starship.toml`，放到 `~/.config`，或者你有兴趣的话也可以自己做一个。

5. 重启 shell

 
### eza

[eza](https://github.com/eza-community/eza) 是更好看的 `ls` 命令.

```bash
sudo pacman -S --needed eza
```

使用：使用别名伪装 `ls` 命令
```bash
alias ls="eza --icons --git -a"
```
`--icons`显示图标，`--git`显示git提交状态，`-a`显示隐藏文件


### fastfetch

以美观的形式在终端显示系统信息

```sh
sudo pacman -S --needed fastfetch
```


## 文件浏览

### zoxide

[zoxide](https://github.com/ajeetdsouza/zoxide) 是一个更好用的 `cd` 命令，提供目录切换记忆、快速跳转功能，需要一段时间进行训练。

```bash
sudo pacman -S --needed zoxide
```

激活：
- fish：
    ```bash
    zoxide init fish | source
    ```
- fish：
    ```bash
    eval "$(zoxide init zsh)"
    ```
- bash：
    ```bash
    eval "$(zoxide init bash)"
    ```

之后可以用 `z` 替代 `cd`：
```bash
z ~  # 等价于 cd ~
```

可以用别名伪装 `cd` 命令：
```bash
alias cd="z"
```

### yazi

[yazi](https://yazi-rs.github.io/) 是一个 rust 开发的终端文件管理器，类似于 `ranger`，性能很好，支持多种格式的文件预览。

```bash
sudo pacman -S --needed yazi ffmpeg 7zip jq poppler fd ripgrep fzf zoxide resvg imagemagick
```

激活方式：
- fish:
    ```bash
    function y
        set tmp (mktemp -t "yazi-cwd.XXXXXX")
        yazi $argv --cwd-file="$tmp"
        if read -z cwd < "$tmp"; and [ -n "$cwd" ]; and [ "$cwd" != "$PWD" ]
            builtin cd -- "$cwd"
        end
        rm -f -- "$tmp"
    end
    ```
- bash/zsh:
    ```bash
    function y() {
        local tmp="$(mktemp -t "yazi-cwd.XXXXXX")" cwd
        yazi "$@" --cwd-file="$tmp"
        IFS= read -r -d '' cwd < "$tmp"
        [ -n "$cwd" ] && [ "$cwd" != "$PWD" ] && builtin cd -- "$cwd"
        rm -f -- "$tmp"
    }
    ```

之后用 `y` 命令启动。

快捷键：`.` 查看隐藏文件，`q` 退出， `F1` 或 `~` 打开帮助菜单。


### helix

[helix](https://helix-editor.com/) 是一个类似于 vim/neovim 的终端文本编辑器，有自己的[键位组合](https://docs.helix-editor.com/)（与 vim 近似），提供了很多开箱即用的功能。

```bash
sudo pacman -S --needed helix
```

推荐添加命令别名：
```bash
alias hx="helix"
```

编辑器内按空格（或自定义的leader键）查看键位帮助。


### less

less 是一个终端文本查看工具，允许用户分页浏览大文件，支持向前和向后滚动（不像 more），并提供强大的文本搜索、高亮、行号显示等功能，非常高效，特别适合查看日志或代码文件。 

```bash
sudo pacman -S --needed less
```


使用方法：
- 打开一个文件
    ```bash
    less /path/to/file
    ```
- 阅读终端输出

    比如运行一个输出很长很长的命令，通过管道符 `|` 用less阅读输出结果

    ```bash
    find /usr | less
    ```
less每次只显示一页内容，空格下一页，b键上一页，q键退出，左斜杠键搜索，g键跳转第一行，shit+g跳转最后一行，-N显示行号，-S禁止换行，更深入的使用可以[自行搜索](https://www.runoob.com/linux/linux-comm-less.html)。


### bat

[bat](https://github.com/sharkdp/bat) 功能与 `cat` 类似，能够以更美观的形式打印文件内容。

```sh
sudo pacman -S --needed bat
```

### man

是 "manual page" 的简称，提供工具使用手册的查询命令。需要安装 `man-db`。
```sh
sudo pacman -S --needed man-db
```

例如，查询 `ls` 命令的用法：
```sh
man ls
```
键位与 vim 基本一致。


## 文件搜索

### fd

[fd](https://github.com/cha0ran/fd-zh) 是更好的 `find` 命令

```bash
sudo pacman -S --needed fd
```

使用方式详见[官方文档](https://github.com/cha0ran/fd-zh)


### fzf

fuzzy finder，这个工具可以使用 [fzf](https://github.com/junegunn/fzf) 命令对当前目录下所有文件当中进行模糊搜索

```bash
sudo pacman -S --needed fzf
```

激活补全：
- fish
    ```bash
    fzf --fish | source
    ```
- zsh
    ```bash
    source <(fzf --zsh)
    ```
- bash
    ```bash
    eval "$(fzf --bash)"
    ```

fzf 接受其他命令的输出作为输入，例如结合 fd 命令：
```bash
fd .txt | fzf  # 查找所有包含 .txt 的文件名
```

### ripgrep

[rg](https://github.com/BurntSushi/ripgrep) 提供正则化递归搜索功能
```sh
sudo pacman -S --needed ripgrep
```

安装后使用 `rg` 命令进行正则搜索。


## 文件传输

### rsync

rsync 是一个常用的 Linux 应用程序，用于文件同步。

它可以在本地计算机与远程计算机之间，或者两个本地目录之间同步文件（但不支持两台远程计算机之间的同步）。它也可以当作文件复制工具，替代cp和mv命令。

```sh
sudo pacman -S --needed rsync
```

推荐设置命令别名用于复制文件

```sh
alias rsyncp="rsync -alvhP"
```


## 下一节：[显卡驱动和硬件编解码](./显卡驱动和硬件编解码)


